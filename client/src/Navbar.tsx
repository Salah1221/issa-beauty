import React, { useState, useEffect } from "react";
import { Search } from "lucide-react";
import { Sheet, SheetContent, SheetTrigger } from "@/components/ui/sheet";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Moon, Sun } from "lucide-react";
import { Link } from "react-router-dom";

type NavbarProps = {
  search: string;
  setSearch: (search: string) => void;
};

const Navbar: React.FC<NavbarProps> = ({ search, setSearch }) => {
  const [isSearchOpen, setIsSearchOpen] = useState(false);
  const [theme, setTheme] = useState<"light" | "dark">("light");
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
    const savedTheme = localStorage.getItem("theme") as "light" | "dark" | null;
    if (savedTheme) {
      setTheme(savedTheme);
      document.body.classList.toggle("dark", savedTheme === "dark");
    }
  }, []);

  const toggleTheme = () => {
    const newTheme = theme === "light" ? "dark" : "light";
    setTheme(newTheme);
    document.body.classList.toggle("dark", newTheme === "dark");
    localStorage.setItem("theme", newTheme);
  };

  useEffect(() => {
    const searchInput = document.querySelector<HTMLInputElement>("#search");
    if (searchInput) {
      searchInput.value = search;
    }
  }, [search]);

  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {
    if (event.key === "Enter") {
      setIsSearchOpen(false);
    }
  };

  return (
    <nav className="border-b">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-16">
          {/* Logo */}
          <Link to="/" className="flex-shrink-0" id="logo">
            <svg
              width="163"
              height="37"
              viewBox="0 0 163 37"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15.56 3.76439C14.9204 4.91745 12.7902 5.65651 14.24 12.7787C14.04 12.6585 13.472 12.4181 12.8 12.4181C8.12 12.4181 4.48 14.1409 2 15.6633C5.84 17.2258 4.16 19.87 10.88 21.6728C10.96 21.152 11.552 19.87 13.28 18.9085C15.44 17.7065 17.24 16.0239 19.28 10.7355C19.24 11.3765 18.944 13.1874 18.08 15.3027C17 17.9469 14.24 19.6296 12.32 21.793C10.4 23.9565 8.84 31.7689 13.28 34.6535C11.48 24.4372 27.44 16.6248 21.08 6.64897C20 4.9663 18.92 4.84611 16.76 1C16.52 1.56089 16.16 2.68267 15.56 3.76439Z"
                fill="black"
              />
              <path
                d="M35 9.53356C27.704 8.28357 24.6 9.814 23.96 10.7355C25.64 13.9806 23.72 13.4999 25.04 14.5816L26.96 15.9037C27.12 15.9437 27.44 16.1441 27.44 16.6248C27.44 17.2258 26.72 16.8652 26.72 17.7065C26.96 18.1873 27.92 17.9469 26.72 18.9085C27.04 19.0286 27.488 19.4133 26.72 19.9902C27.32 20.7113 27.68 22.5142 23.96 22.1536C23.24 22.1536 21.704 22.8267 21.32 25.519C24.296 29.2689 30.88 29.325 33.8 28.8843C33.76 27.3218 32.624 23.1392 28.4 18.9085C33.68 16.1441 33.8 10.7355 35 9.53356Z"
                fill="black"
              />
              <path
                d="M56.13 10.94L56.25 16.52C56.25 23.24 53.95 26.6 49.35 26.6C48.45 26.6 47.63 26.39 46.89 25.97C46.17 25.55 45.81 24.9 45.81 24.02C45.81 23.48 45.95 23.04 46.23 22.7C46.51 22.34 46.88 22.16 47.34 22.16C47.82 22.16 48.06 22.27 48.06 22.49C48.06 22.59 48 22.79 47.88 23.09C47.76 23.37 47.7 23.66 47.7 23.96C47.7 24.24 47.87 24.55 48.21 24.89C48.55 25.21 49.06 25.37 49.74 25.37C50.42 25.37 51.01 25.23 51.51 24.95C52.01 24.67 52.41 24.26 52.71 23.72C53.01 23.16 53.25 22.59 53.43 22.01C53.63 21.43 53.77 20.7 53.85 19.82C53.97 18.52 54.03 17.05 54.03 15.41C54.03 13.75 54.05 12.38 54.09 11.3C51.53 11.74 50.25 12.84 50.25 14.6C50.25 15.1 50.14 15.49 49.92 15.77C49.72 16.05 49.46 16.19 49.14 16.19C48.54 16.19 48.24 15.85 48.24 15.17C48.24 13.95 48.77 12.93 49.83 12.11C50.91 11.29 52.37 10.68 54.21 10.28C54.35 9.46 54.69 8.8 55.23 8.3C55.77 7.78 56.26 7.52 56.7 7.52C57.14 7.52 57.49 7.65 57.75 7.91C58.03 8.15 58.17 8.48 58.17 8.9C58.17 9.88 57.49 10.56 56.13 10.94ZM56.94 8.54C56.5 8.54 56.24 8.99 56.16 9.89C56.88 9.67 57.24 9.38 57.24 9.02C57.24 8.7 57.14 8.54 56.94 8.54ZM62.3013 16.82L62.3613 16.37C62.3613 16.01 62.1513 15.83 61.7313 15.83C61.3313 15.83 60.9413 16.1 60.5613 16.64C60.1813 17.16 59.9913 17.59 59.9913 17.93C59.9913 18.27 60.0113 18.54 60.0513 18.74C60.0913 18.94 60.1313 19.11 60.1713 19.25C60.2313 19.37 60.3213 19.52 60.4413 19.7C60.5613 19.88 60.6513 20.01 60.7113 20.09L61.0413 20.51C61.1813 20.71 61.2813 20.84 61.3413 20.9C62.3813 20.04 63.6213 19.08 65.0613 18.02C65.1413 17.96 65.2313 17.93 65.3313 17.93C65.5313 17.93 65.6313 18.04 65.6313 18.26C65.6313 18.48 65.5413 18.65 65.3613 18.77C64.0813 19.59 62.8713 20.48 61.7313 21.44C62.1713 22.08 62.3913 22.78 62.3913 23.54C62.3913 24.3 62.1013 24.95 61.5213 25.49C60.9413 26.03 60.2013 26.3 59.3013 26.3C58.4013 26.3 57.9513 25.87 57.9513 25.01C57.9513 24.39 58.6113 23.44 59.9313 22.16C59.8313 22.04 59.6513 21.85 59.3913 21.59C59.1313 21.31 58.9313 21.09 58.7913 20.93C58.6713 20.77 58.5213 20.56 58.3413 20.3C58.0213 19.8 57.8613 19.26 57.8613 18.68C57.8613 17.5 58.2413 16.55 59.0013 15.83C59.7613 15.09 60.5713 14.72 61.4313 14.72C61.9713 14.72 62.3913 14.87 62.6913 15.17C62.9913 15.45 63.1413 15.74 63.1413 16.04C63.1413 16.72 62.9813 17.06 62.6613 17.06C62.4213 17.06 62.3013 16.98 62.3013 16.82ZM60.3813 22.73C59.5813 23.53 59.1813 24.18 59.1813 24.68C59.1813 25.16 59.4313 25.4 59.9313 25.4C60.2313 25.4 60.4813 25.28 60.6813 25.04C61.1213 24.44 61.0213 23.67 60.3813 22.73ZM68.5416 16.82L68.6016 16.37C68.6016 16.01 68.3916 15.83 67.9716 15.83C67.5716 15.83 67.1816 16.1 66.8016 16.64C66.4216 17.16 66.2316 17.59 66.2316 17.93C66.2316 18.27 66.2516 18.54 66.2916 18.74C66.3316 18.94 66.3716 19.11 66.4116 19.25C66.4716 19.37 66.5616 19.52 66.6816 19.7C66.8016 19.88 66.8916 20.01 66.9516 20.09L67.2816 20.51C67.4216 20.71 67.5216 20.84 67.5816 20.9C68.6216 20.04 69.8616 19.08 71.3016 18.02C71.3816 17.96 71.4716 17.93 71.5716 17.93C71.7716 17.93 71.8716 18.04 71.8716 18.26C71.8716 18.48 71.7816 18.65 71.6016 18.77C70.3216 19.59 69.1116 20.48 67.9716 21.44C68.4116 22.08 68.6316 22.78 68.6316 23.54C68.6316 24.3 68.3416 24.95 67.7616 25.49C67.1816 26.03 66.4416 26.3 65.5416 26.3C64.6416 26.3 64.1916 25.87 64.1916 25.01C64.1916 24.39 64.8516 23.44 66.1716 22.16C66.0716 22.04 65.8916 21.85 65.6316 21.59C65.3716 21.31 65.1716 21.09 65.0316 20.93C64.9116 20.77 64.7616 20.56 64.5816 20.3C64.2616 19.8 64.1016 19.26 64.1016 18.68C64.1016 17.5 64.4816 16.55 65.2416 15.83C66.0016 15.09 66.8116 14.72 67.6716 14.72C68.2116 14.72 68.6316 14.87 68.9316 15.17C69.2316 15.45 69.3816 15.74 69.3816 16.04C69.3816 16.72 69.2216 17.06 68.9016 17.06C68.6616 17.06 68.5416 16.98 68.5416 16.82ZM66.6216 22.73C65.8216 23.53 65.4216 24.18 65.4216 24.68C65.4216 25.16 65.6716 25.4 66.1716 25.4C66.4716 25.4 66.7216 25.28 66.9216 25.04C67.3616 24.44 67.2616 23.67 66.6216 22.73ZM78.7718 26.15C77.9918 26.15 77.4018 25.99 77.0018 25.67C76.8618 25.53 76.7918 25.18 76.7918 24.62C76.7918 24.04 76.8118 23.27 76.8518 22.31C76.3318 23.61 75.8118 24.58 75.2918 25.22C74.7918 25.84 74.1418 26.15 73.3418 26.15C72.5418 26.15 71.8418 25.78 71.2418 25.04C70.6418 24.28 70.3418 23.1 70.3418 21.5C70.3418 19.88 70.7918 18.45 71.6918 17.21C72.6118 15.97 73.8118 15.35 75.2918 15.35C75.9318 15.35 76.6518 15.77 77.4518 16.61C77.6118 16.39 77.8918 16.13 78.2918 15.83C78.7118 15.51 79.0618 15.35 79.3418 15.35C79.6418 15.35 79.7918 15.73 79.7918 16.49C79.7918 16.69 79.7318 17.08 79.6118 17.66C79.5118 18.24 79.3918 18.66 79.2518 18.92C79.0718 19.38 78.9818 21.01 78.9818 23.81C78.9818 24.35 79.0418 24.62 79.1618 24.62C79.5018 24.6 79.9718 24.18 80.5718 23.36C81.1718 22.52 81.7618 21.45 82.3418 20.15C82.9418 18.85 83.3018 18.2 83.4218 18.2C83.5618 18.2 83.6318 18.28 83.6318 18.44C83.6318 19 83.3418 19.89 82.7618 21.11C81.1818 24.47 79.8518 26.15 78.7718 26.15ZM75.1118 16.55C74.5518 16.55 73.9518 16.97 73.3118 17.81C72.6918 18.63 72.3818 19.6 72.3818 20.72C72.3818 21.84 72.5418 22.76 72.8618 23.48C73.2018 24.2 73.6418 24.56 74.1818 24.56C74.8418 24.56 75.8118 22.91 77.0918 19.61C77.1118 19.45 77.1318 19.18 77.1518 18.8C77.1918 18.4 77.2218 18.1 77.2418 17.9C77.0618 17.58 76.7418 17.28 76.2818 17C75.8418 16.7 75.4518 16.55 75.1118 16.55ZM95.4527 25.22C96.5327 25.22 97.4827 24.84 98.3027 24.08C99.1427 23.32 99.5627 22.45 99.5627 21.47C99.5627 20.47 99.2527 19.55 98.6327 18.71C97.9527 19.05 97.2827 19.22 96.6227 19.22C95.0827 19.22 94.3127 18.74 94.3127 17.78C94.3127 17.5 94.5027 17.25 94.8827 17.03C95.2627 16.79 95.8027 16.67 96.5027 16.67C97.2227 16.67 98.0027 16.88 98.8427 17.3C99.6427 16.44 100.043 15.47 100.043 14.39C100.043 13.05 99.4527 11.99 98.2727 11.21C97.1127 10.41 95.8627 10.01 94.5227 10.01C94.2427 10.01 94.0327 10.02 93.8927 10.04C93.8727 10.62 93.8227 11.55 93.7427 12.83C93.6227 14.75 93.5627 17.68 93.5627 21.62C93.5627 23.14 93.4527 23.9 93.2327 23.9C92.3727 23.9 91.8227 23.78 91.5827 23.54C91.3427 23.3 91.2227 22.61 91.2227 21.47C91.2227 21.19 91.2727 20.04 91.3727 18.02C91.4927 16 91.5527 14.37 91.5527 13.13C91.5527 11.89 91.5927 10.98 91.6727 10.4C90.6127 10.76 90.0427 11.34 89.9627 12.14C89.8827 12.8 89.7327 13.26 89.5127 13.52C89.3127 13.78 89.0327 13.91 88.6727 13.91C88.3327 13.91 88.1027 13.82 87.9827 13.64C87.8627 13.44 87.8027 13.24 87.8027 13.04C87.8027 11.3 89.1527 10.1 91.8527 9.44C92.1927 8.08 92.7327 7.4 93.4727 7.4C93.7727 7.4 93.9227 7.96 93.9227 9.08C94.4427 9.02 95.0827 8.99 95.8427 8.99C96.6227 8.99 97.5127 9.14 98.5127 9.44C99.5127 9.72 100.383 10.23 101.123 10.97C101.863 11.69 102.233 12.5 102.233 13.4C102.233 15.08 101.423 16.59 99.8027 17.93C100.923 18.81 101.483 19.86 101.483 21.08C101.483 22.3 101.103 23.31 100.343 24.11C98.9227 25.57 97.0227 26.3 94.6427 26.3C93.0227 26.3 91.8627 26.19 91.1627 25.97C91.0227 25.93 90.8727 25.83 90.7127 25.67C90.5727 25.49 90.5027 25.27 90.5027 25.01C90.5027 24.59 90.9127 24.38 91.7327 24.38C91.9927 24.38 92.5627 24.52 93.4427 24.8C94.3227 25.08 94.9927 25.22 95.4527 25.22ZM98.0027 18.05C97.4027 17.55 96.8327 17.3 96.2927 17.3C95.7727 17.3 95.5127 17.41 95.5127 17.63C95.5127 18.09 96.0027 18.32 96.9827 18.32C97.3427 18.32 97.6827 18.23 98.0027 18.05ZM106.639 26.15C105.519 26.15 104.629 25.73 103.969 24.89C103.309 24.03 102.979 23.06 102.979 21.98C102.979 19.8 103.439 18.15 104.359 17.03C105.279 15.91 106.469 15.35 107.929 15.35C108.609 15.35 109.169 15.54 109.609 15.92C110.049 16.28 110.269 16.78 110.269 17.42C110.269 18.62 109.759 19.63 108.739 20.45C107.739 21.25 106.509 21.67 105.049 21.71C105.129 22.49 105.389 23.17 105.829 23.75C106.289 24.31 106.819 24.59 107.419 24.59C108.019 24.59 108.559 24.45 109.039 24.17C109.519 23.89 109.959 23.49 110.359 22.97C111.199 21.87 111.919 20.62 112.519 19.22C112.679 18.86 112.799 18.6 112.879 18.44C112.979 18.28 113.079 18.2 113.179 18.2C113.299 18.2 113.359 18.28 113.359 18.44C113.359 19.44 112.749 20.94 111.529 22.94C110.209 25.08 108.579 26.15 106.639 26.15ZM105.049 20.99C106.229 20.79 107.089 20.41 107.629 19.85C108.189 19.29 108.469 18.56 108.469 17.66C108.469 16.76 108.179 16.31 107.599 16.31C106.899 16.31 106.309 16.8 105.829 17.78C105.349 18.74 105.089 19.81 105.049 20.99ZM120.198 26.15C119.418 26.15 118.828 25.99 118.428 25.67C118.288 25.53 118.218 25.18 118.218 24.62C118.218 24.04 118.238 23.27 118.278 22.31C117.758 23.61 117.238 24.58 116.718 25.22C116.218 25.84 115.568 26.15 114.768 26.15C113.968 26.15 113.268 25.78 112.668 25.04C112.068 24.28 111.768 23.1 111.768 21.5C111.768 19.88 112.218 18.45 113.118 17.21C114.038 15.97 115.238 15.35 116.718 15.35C117.358 15.35 118.078 15.77 118.878 16.61C119.038 16.39 119.318 16.13 119.718 15.83C120.138 15.51 120.488 15.35 120.768 15.35C121.068 15.35 121.218 15.73 121.218 16.49C121.218 16.69 121.158 17.08 121.038 17.66C120.938 18.24 120.818 18.66 120.678 18.92C120.498 19.38 120.408 21.01 120.408 23.81C120.408 24.35 120.468 24.62 120.588 24.62C120.928 24.6 121.398 24.18 121.998 23.36C122.598 22.52 123.188 21.45 123.768 20.15C124.368 18.85 124.728 18.2 124.848 18.2C124.988 18.2 125.058 18.28 125.058 18.44C125.058 19 124.768 19.89 124.188 21.11C122.608 24.47 121.278 26.15 120.198 26.15ZM116.538 16.55C115.978 16.55 115.378 16.97 114.738 17.81C114.118 18.63 113.808 19.6 113.808 20.72C113.808 21.84 113.968 22.76 114.288 23.48C114.628 24.2 115.068 24.56 115.608 24.56C116.268 24.56 117.238 22.91 118.518 19.61C118.538 19.45 118.558 19.18 118.578 18.8C118.618 18.4 118.648 18.1 118.668 17.9C118.488 17.58 118.168 17.28 117.708 17C117.268 16.7 116.878 16.55 116.538 16.55ZM123.252 23.39L123.432 20.03C123.432 17.89 123.532 16.72 123.732 16.52C123.932 16.32 124.282 16.03 124.782 15.65C125.302 15.25 125.672 15.05 125.892 15.05C126.132 15.05 126.282 15.09 126.342 15.17C126.402 15.25 126.432 15.41 126.432 15.65C126.432 16.51 126.242 17.38 125.862 18.26C125.562 20.1 125.412 21.61 125.412 22.79C125.412 23.97 125.602 24.56 125.982 24.56C126.442 24.56 126.982 24.16 127.602 23.36C128.222 22.56 128.842 21.37 129.462 19.79C129.642 17.79 129.782 16.71 129.882 16.55C130.002 16.39 130.282 16.1 130.722 15.68C131.162 15.26 131.522 15.05 131.802 15.05C132.102 15.05 132.252 15.43 132.252 16.19C132.252 16.39 132.192 16.78 132.072 17.36C131.972 17.94 131.852 18.36 131.712 18.62C131.492 19.18 131.382 20.91 131.382 23.81C131.382 24.35 131.442 24.62 131.562 24.62C131.902 24.6 132.372 24.18 132.972 23.36C133.572 22.52 134.162 21.45 134.742 20.15C135.342 18.85 135.702 18.2 135.822 18.2C135.962 18.2 136.032 18.28 136.032 18.44C136.032 19 135.742 19.89 135.162 21.11C133.582 24.47 132.252 26.15 131.172 26.15C130.392 26.15 129.802 25.99 129.402 25.67C129.262 25.53 129.192 25.1 129.192 24.38C129.192 23.66 129.222 22.86 129.282 21.98C128.642 23.34 128.002 24.38 127.362 25.1C126.722 25.8 126.002 26.15 125.202 26.15C124.422 26.15 123.902 25.94 123.642 25.52C123.382 25.1 123.252 24.39 123.252 23.39ZM140.929 21.11C139.349 24.47 138.009 26.15 136.909 26.15C135.829 26.15 135.189 26.02 134.989 25.76C134.809 25.5 134.719 24.64 134.719 23.18C134.719 21.72 134.859 19.61 135.139 16.85C134.139 16.65 133.609 16.24 133.549 15.62C133.549 15.3 133.759 15.14 134.179 15.14C134.599 15.14 134.969 15.22 135.289 15.38C135.469 13.94 135.679 12.48 135.919 11C135.979 10.62 136.169 10.26 136.489 9.92C136.809 9.58 137.119 9.41 137.419 9.41C137.679 9.41 137.809 9.82 137.809 10.64C137.809 11.02 137.669 12.77 137.389 15.89C137.929 15.79 138.519 15.59 139.159 15.29C139.819 14.99 140.209 14.84 140.329 14.84C140.689 14.84 140.869 14.95 140.869 15.17C140.889 15.37 140.519 15.65 139.759 16.01C138.999 16.35 138.179 16.61 137.299 16.79C137.059 19.71 136.939 21.92 136.939 23.42C136.939 24.22 137.059 24.62 137.299 24.62C137.659 24.6 138.139 24.18 138.739 23.36C139.339 22.54 139.929 21.48 140.509 20.18C141.109 18.86 141.469 18.2 141.589 18.2C141.729 18.2 141.799 18.28 141.799 18.44C141.799 19 141.509 19.89 140.929 21.11ZM140.244 23.39L140.424 20.03C140.424 17.89 140.524 16.72 140.724 16.52C140.924 16.32 141.274 16.03 141.774 15.65C142.294 15.25 142.664 15.05 142.884 15.05C143.124 15.05 143.274 15.09 143.334 15.17C143.394 15.25 143.424 15.41 143.424 15.65C143.424 16.51 143.234 17.38 142.854 18.26C142.554 20.1 142.404 21.61 142.404 22.79C142.404 23.97 142.544 24.56 142.824 24.56C143.304 24.56 143.854 24.14 144.474 23.3C145.114 22.44 145.764 21.18 146.424 19.52C146.444 19.08 146.464 18.62 146.484 18.14C146.504 17.64 146.524 17.28 146.544 17.06C146.564 16.82 146.574 16.65 146.574 16.55C146.594 16.45 146.874 16.18 147.414 15.74C147.954 15.28 148.364 15.05 148.644 15.05C148.944 15.05 149.094 15.43 149.094 16.19C149.094 16.39 149.034 16.78 148.914 17.36C148.814 17.94 148.694 18.36 148.554 18.62C148.394 20.04 148.284 21.28 148.224 22.34C150.184 19.86 151.224 18.55 151.344 18.41C151.484 18.27 151.604 18.2 151.704 18.2C151.904 18.2 152.004 18.3 152.004 18.5C152.004 18.62 151.964 18.75 151.884 18.89C151.244 19.83 149.984 21.48 148.104 23.84C147.984 26.22 147.904 27.84 147.864 28.7C147.764 31.24 147.404 33.02 146.784 34.04C146.184 35.08 145.104 35.6 143.544 35.6C142.864 35.6 142.224 35.39 141.624 34.97C141.044 34.57 140.754 33.86 140.754 32.84C140.754 31.84 141.134 30.81 141.894 29.75C142.674 28.69 144.084 27.06 146.124 24.86L146.304 21.59C145.624 23.09 144.954 24.23 144.294 25.01C143.634 25.77 142.904 26.15 142.104 26.15C141.304 26.15 140.794 25.95 140.574 25.55C140.354 25.15 140.244 24.43 140.244 23.39ZM146.034 26.27C143.754 28.73 142.614 30.7 142.614 32.18C142.614 32.86 142.734 33.42 142.974 33.86C143.214 34.3 143.544 34.52 143.964 34.52C144.604 34.52 145.054 34.17 145.314 33.47C145.574 32.77 145.764 31.35 145.884 29.21L146.034 26.27Z"
                fill="black"
              />
            </svg>
          </Link>

          {/* Search bar and theme toggle container */}
          <div className="flex items-center space-x-2 md:space-x-4 flex-grow justify-end">
            {/* Search bar for larger screens */}
            <div className="hidden md:block max-w-md">
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <Search
                    className="h-5 w-5 text-gray-400"
                    aria-hidden="true"
                  />
                </div>
                <Input
                  id="search"
                  type="search"
                  placeholder="Search..."
                  className="pl-10 w-full"
                  name="search"
                  defaultValue={search}
                  onChange={(e) => setSearch(e.target.value)}
                />
              </div>
            </div>

            {/* Theme toggle */}
            {mounted && (
              <Button
                variant="ghost"
                size="icon"
                onClick={toggleTheme}
                className="ml-2 md:ml-4"
              >
                {theme === "light" ? (
                  <Moon className="h-5 w-5" />
                ) : (
                  <Sun className="h-5 w-5" />
                )}
                <span className="sr-only">Toggle theme</span>
              </Button>
            )}
          </div>

          {/* Search button for mobile */}
          <div className="md:hidden ml-2">
            <Sheet open={isSearchOpen} onOpenChange={setIsSearchOpen}>
              <SheetTrigger asChild>
                <Button variant="ghost" size="icon">
                  <Search className="h-5 w-5" />
                  <span className="sr-only">Open search</span>
                </Button>
              </SheetTrigger>
              <SheetContent side="top" className="h-32">
                <div className="h-full flex items-center">
                  <Input
                    id="search"
                    type="search"
                    placeholder="Search..."
                    className="w-full"
                    autoFocus
                    name="search"
                    defaultValue={search}
                    onChange={(e) => setSearch(e.target.value)}
                    onKeyDown={handleKeyDown}
                  />
                </div>
              </SheetContent>
            </Sheet>
          </div>
        </div>
      </div>
    </nav>
  );
};

export default Navbar;
